## Phase 1:页面清单

记录所有页面、弹窗和状态

| 类型       | 名称                  | 用途/说明                                  | 相关状态/关联元素                  |  
|------------|-----------------------|-------------------------------------------|-----------------------------------|  
| 页面    | 患者管理首页          | 显示患者列表、搜索框、新增患者按钮        | - 无特殊状态；点击"搜索框"会弹出患者搜索弹窗 |  
| 弹窗     | 患者搜索弹窗          | 输入患者姓名/住院号后显示搜索结果         | - 有"无结果""加载中""显示10条结果"三种状态 |  
| 页面    | 患者详情页            | 显示患者基本信息、AI评分按钮、病历信息    | - AI评分按钮有"可生成评分"（蓝色）和"生成中"（灰色）两种状态 |  
| 弹窗     | AI评分报告弹窗        | 显示AI生成的评分报告和专家点评功能        | - 有"生成中""显示报告""编辑点评"三种状态，支持同时展示3个报告 |  

## Phase 2: 需求文档结构



#### 范围定义
**本版本包含**:
- AI智能评分生成
- 专家点评系统
- 质控报告查看

**本版本不包含**:
- 患者信息管理
- 高级数据分析仪表板

### 2.2 用户旅程文档

#### 旅程1: 患者查找与评分
**用户角色**: 质控医生
**入口点**: 登录系统后进入患者管理首页
**步骤**:
1. **搜索患者** → 打开搜索弹窗 → 输入关键词
2. **选择患者** → 点击患者卡片 → 进入患者详情页
3. **生成评分** → 点击"生成AI评分"按钮 → 等待AI处理
4. **查看报告** → AI评分报告弹窗显示 → 查看评分详情

**决策点**:
- 搜索结果是否匹配？
- 患者病历是否完整？
- 是否需要生成评分？

**成功标准**: 成功生成AI评分报告
**错误场景**: 
- 搜索无结果：显示"暂无匹配患者"
- 病历不完整：提示"病历信息不完整，无法生成评分"
- 网络错误：显示"网络异常，请稍后重试"

**退出点**: 关闭弹窗或返回首页


### 2.3 详细功能规范

#### 用户故事格式

**故事1: AI评分生成**
- **作为** 质控医生
- **我希望** 系统能自动生成患者的质控评分
- **以便** 快速了解患者的医疗质量状况

**验收标准**:
- **给定** 患者有完整的病历信息
- **当** 我点击"生成AI评分"按钮
- **那么** 系统应该在30秒内生成评分报告

#### 逐屏幕详细说明

**屏幕1: 患者管理首页**
- **屏幕名称**: 患者管理首页
- **目的**: 提供患者搜索和列表展示功能
- **用户入口**: 系统登录后的默认页面

**关键元素**:
- **头部/导航**: 系统Logo、用户信息、主导航菜单
- **主要内容区**: 搜索框、患者列表、分页控件
- **交互元素**: 搜索按钮、患者卡片、新增按钮
- **底部/次要操作**: 页脚信息、帮助链接

**行为规范**:
- **按钮交互**: 悬停效果、点击反馈、加载状态
- **表单行为**: 实时搜索、输入验证、清空功能
- **数据加载模式**: 骨架屏、分页加载、错误重试
- **错误处理**: 网络异常提示、数据为空状态


## Phase 3: UI规范与AI编码

### 3.1 组件库文档

#### 组件: 主要按钮
**目的**: 执行主要操作的按钮组件
**变体**: 默认、悬停、激活、禁用、加载

**行为**:
- **默认状态**: 蓝色背景(#1890ff)，白色文字，圆角4px
- **悬停状态**: 背景色加深10%(#40a9ff)
- **激活状态**: 背景色加深20%(#096dd9)
- **禁用状态**: 灰色背景(#f5f5f5)，灰色文字(#bfbfbf)
- **加载状态**: 显示旋转图标，禁用点击


### 3.4 验证规则
表单验证、输入约束、错误消息

#### 输入验证
| 字段 | 验证规则 | 错误消息 | 验证时机 |
|------|---------|---------|---------|
| 患者姓名 | 必填，2-20个字符，仅支持中文 | "请输入患者姓名，长度为2-20个中文字符" | 失去焦点时 |
| 住院号 | 必填，数字格式，8-12位 | "请输入正确的住院号格式（8-12位数字）" | 实时验证 |
| 身份证号 | 18位身份证格式，校验位验证 | "请输入正确的18位身份证号码" | 失去焦点时 |
| 联系电话 | 11位手机号格式，1开头 | "请输入正确的11位手机号码" | 失去焦点时 |
| 专家点评 | 最多500字符，不允许特殊字符 | "点评内容不能超过500字，不支持特殊字符" | 实时计数 |

#### 业务规则验证
| 规则 | 验证逻辑 | 错误处理 |
|------|---------|---------|
| 重复住院号 | 检查数据库是否存在相同住院号 | 提示"该住院号已存在，请检查后重新输入" |
| AI评分权限 | 检查用户角色是否有评分权限 | 隐藏评分按钮或显示"您没有权限执行此操作" |
| 病历完整性 | 检查必要的病历字段是否完整 | 提示"病历信息不完整，缺少：[具体字段]" |
| 并发评分限制 | 检查是否有正在进行的评分任务 | 提示"请等待当前评分任务完成后再试" |

## Phase 4: 质量保证与AI优化

### 4.1 PRD审查清单

- [x] 所有用户旅程已从Axure流程映射
- [x] 每个屏幕都有行为规范文档
- [x] 组件库完全规范化
- [x] API需求清晰定义
- [x] 错误处理已文档化
- [x] 测试场景已概述

### 4.2 AI编码优化


#### 明确的需求
- 避免"直观"或"用户友好"等模糊语言
- 使用具体的度量标准和行为描述
- 提供明确的成功标准


#### 第三方集成
- **HMS API**: 医院管理系统集成
- **DeepSeek API**: AI评分服务

